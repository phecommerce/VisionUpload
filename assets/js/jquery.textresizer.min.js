!function(e){"use strict";var t,s,i;i=function(e){return"object"==typeof window.JSON&&"function"==typeof window.JSON.stringify?JSON.stringify(e):e},s=function(e){window.console&&"function"==typeof window.console.log&&setTimeout(function(){var t,s,o=[];if("string"==typeof e)o.push("jquery.textresizer => "+e);else{o.push("jquery.textresizer => {");for(t in e)e.hasOwnProperty(t)&&(s=["    ",t,": ",i(e[t])].join(""),o.push(s));o.push("}")}console.log(o.join("\n"))},0)},t=function(e,s){this.$elements=e,this.settings=s||t.defaults},t.defaults={debugMode:!1,type:"fontSize",target:"body",selectedIndex:-1,suppressClickThrough:!0},t.prototype.buildDefaultFontSizes=function(e){if(0!==e){var t,i,o=8,n=[];if(this.settings.debugMode&&s("In buildDefaultFontSizes: numElms = "+e),this.settings.debugMode)for(t=0;e>t;t+=1)i=(o+2*t)/10,n.push(i+"em"),s("In buildDefaultFontSizes: mySizes["+t+"] = "+n[t]);else for(t=0;e>t;t+=1)i=(o+2*t)/10,n.push(i+"em");return n}},t.prototype.serializeHash=function(t){return e.param(t).replace(/\+/g,"%20")},t.prototype.deserializeHash=function(e){var t,s,i,o={},n=/\&|\|/g,r=e.split(n);for(t=0,s=r.length;s>t;t+=1)i=r[t].split("="),o[i[0]]=window.decodeURIComponent(i[1]);return o},t.prototype.buildCookieID=function(e,t,s){return"JQUERY.TEXTRESIZER["+e+","+t+"]."+s},t.prototype.getCookie=function(t,s,i){var o=this.buildCookieID(t,s,i),n=e.cookie(o);return"dict"===e.cookie(o+".valueType")&&n?this.deserializeHash(n):n},t.prototype.setCookie=function(t,i,o,n){var r,a=this.buildCookieID(t,i,o),u={expires:365,path:"/"};"object"==typeof n?(e.cookie(a+".valueType","dict",u),r=this.serializeHash(n),e.cookie(a,r,u),this.settings.debugMode&&s("In setCookie: Cookie: "+a+": "+r)):(e.cookie(a,n,u),this.settings.debugMode&&s("In setCookie: Cookie (not hash): "+a+": "+n))},t.prototype.applyInlineCssProperties=function(e,t){e.css(t)},t.prototype.applyCssClass=function(t,s,i){e.each(i,function(){var s=this.toString();t.each(function(){var t=e(this);t.hasClass(s)&&t.removeClass(s)})}),t.addClass(s)},t.prototype.applySpecificFontSize=function(e,t){e.css("font-size",t)},t.prototype.applyFontSize=function(t){this.settings.debugMode&&s(["In applyFontSize(): target: ",this.settings.target," | ","newSize: ",i(t)," | ","type: ",this.settings.type].join(""));var o=e(this.settings.target);switch(this.settings.type){case"css":this.applyInlineCssProperties(o,t);break;case"cssClass":this.applyCssClass(o,t,this.settings.sizes);break;default:this.applySpecificFontSize(o,t)}},t.prototype.loadPreviousState=function(){var t,i,o,n=this.settings;e.cookie?(n.debugMode&&s("In loadPreviousState(): jquery.cookie: INSTALLED"),t=this.getCookie(n.selector,n.target,"selectedIndex"),i=parseInt(t,10),o=this.getCookie(n.selector,n.target,"size"),isNaN(i)||(n.selectedIndex=i),n.debugMode&&(s("In loadPreviousState: selectedIndex: "+i+"; type: "+typeof i),s("In loadPreviousState: prevSize: "+o+"; type: "+typeof o)),o&&this.applyFontSize(o)):n.debugMode&&s("In loadPreviousState(): jquery.cookie: NOT INSTALLED")},t.prototype.markActive=function(t){e(this.settings.selector).removeClass("textresizer-active"),e(t).addClass("textresizer-active")},t.prototype.saveState=function(t){if(e.cookie){var i=this.settings.selector,o=this.settings.target,n=this.settings.selectedIndex;this.settings.debugMode&&s("In saveState(): jquery.cookie: INSTALLED"),this.setCookie(i,o,"size",t),this.setCookie(i,o,"selectedIndex",n)}else this.settings.debugMode&&s("In saveState(): jquery.cookie: NOT INSTALLED")},t.prototype.attachResizerToElement=function(t,s){var i=this,o=i.settings,n=e(t),r=o.sizes[s];s===o.selectedIndex&&n.addClass("textresizer-active"),n.on("click",{index:s},function(e){var t=this;o.suppressClickThrough&&e.preventDefault(),o.selectedIndex=e.data.index,i.applyFontSize(r),i.saveState(r),i.markActive(t)})},t.prototype.init=function(){var i=this.$elements.size(),o=t.defaults.debugMode;return o&&s("init() => selection count: "+i),0!==i?(this.settings=e.extend({selector:this.$elements.selector,sizes:this.buildDefaultFontSizes(i)},e.fn.textresizer.defaults,this.settings),o=this.settings.debugMode,o&&s(this.settings),i>this.settings.sizes.length?void(o&&s("ERROR: Number of defined sizes incompatible with number of buttons => elements: "+i+"; defined sizes: "+this.settings.sizes.length+"; target: "+this.settings.target)):(this.loadPreviousState(),this)):void 0},e.fn.textresizer=function(e){var s=new t(this,e).init();return this.each(function(e){s.attachResizerToElement(this,e)})},e.fn.textresizer.defaults=t.defaults}(window.jQuery);